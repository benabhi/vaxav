import type { Meta, StoryObj } from '@storybook/vue3';
import VxvSelect from './VxvSelect.vue';

/**
 * VxvSelect es el componente de selecci√≥n principal de la aplicaci√≥n.
 * Permite a los usuarios elegir una o varias opciones de una lista desplegable.
 */
const meta: Meta<typeof VxvSelect> = {
  title: 'UI/Forms/VxvSelect',
  component: VxvSelect,
  tags: ['autodocs'],
  argTypes: {
    modelValue: {
      description: 'Valor del select (v-model)',
      control: { type: 'text' },
    },
    label: {
      description: 'Etiqueta del campo',
      control: { type: 'text' },
    },
    placeholder: {
      description: 'Texto de placeholder',
      control: { type: 'text' },
    },
    disabled: {
      description: 'Deshabilita el select',
      control: { type: 'boolean' },
    },
    required: {
      description: 'Marca el campo como requerido',
      control: { type: 'boolean' },
    },
    multiple: {
      description: 'Permite selecci√≥n m√∫ltiple',
      control: { type: 'boolean' },
    },
    error: {
      description: 'Mensaje de error',
      control: { type: 'text' },
    },
    hint: {
      description: 'Texto de ayuda',
      control: { type: 'text' },
    },
    size: {
      description: 'Tama√±o del select',
      control: { type: 'select' },
      options: ['sm', 'md', 'lg'],
    },
    options: {
      description: 'Array de opciones',
      control: { type: 'object' },
    },
    valueKey: {
      description: 'Clave para el valor en las opciones',
      control: { type: 'text' },
    },
    labelKey: {
      description: 'Clave para la etiqueta en las opciones',
      control: { type: 'text' },
    },
  },
};

export default meta;
type Story = StoryObj<typeof VxvSelect>;

/**
 * Ejemplo b√°sico del select
 */
export const Default: Story = {
  args: {
    modelValue: '',
    label: 'Pa√≠s',
    placeholder: 'Selecciona un pa√≠s',
    options: [
      { value: 'es', label: 'Espa√±a' },
      { value: 'mx', label: 'M√©xico' },
      { value: 'ar', label: 'Argentina' },
      { value: 'co', label: 'Colombia' },
      { value: 'pe', label: 'Per√∫' },
    ],
    size: 'md',
  },
  render: (args) => ({
    components: { VxvSelect },
    setup() {
      return { args };
    },
    template: '<vxv-select v-bind="args" />',
  }),
};

/**
 * Select con opciones simples (strings)
 */
export const SimpleOptions: Story = {
  args: {
    modelValue: '',
    label: 'Tama√±o',
    placeholder: 'Selecciona un tama√±o',
    options: ['Peque√±o', 'Mediano', 'Grande', 'Extra Grande'],
    size: 'md',
  },
  render: (args) => ({
    components: { VxvSelect },
    setup() {
      return { args };
    },
    template: '<vxv-select v-bind="args" />',
  }),
};

/**
 * Select con campo requerido
 */
export const Required: Story = {
  args: {
    modelValue: '',
    label: 'Categor√≠a',
    placeholder: 'Selecciona una categor√≠a',
    required: true,
    options: [
      { value: 'tech', label: 'Tecnolog√≠a' },
      { value: 'sports', label: 'Deportes' },
      { value: 'health', label: 'Salud' },
      { value: 'finance', label: 'Finanzas' },
    ],
    size: 'md',
  },
  render: (args) => ({
    components: { VxvSelect },
    setup() {
      return { args };
    },
    template: '<vxv-select v-bind="args" />',
  }),
};

/**
 * Select con mensaje de error
 */
export const WithError: Story = {
  args: {
    modelValue: '',
    label: 'Pa√≠s',
    placeholder: 'Selecciona un pa√≠s',
    error: 'Por favor selecciona un pa√≠s',
    options: [
      { value: 'es', label: 'Espa√±a' },
      { value: 'mx', label: 'M√©xico' },
      { value: 'ar', label: 'Argentina' },
    ],
    size: 'md',
  },
  render: (args) => ({
    components: { VxvSelect },
    setup() {
      return { args };
    },
    template: '<vxv-select v-bind="args" />',
  }),
};

/**
 * Select con texto de ayuda
 */
export const WithHint: Story = {
  args: {
    modelValue: '',
    label: 'Moneda',
    placeholder: 'Selecciona una moneda',
    hint: 'La moneda se utilizar√° para todas las transacciones',
    options: [
      { value: 'usd', label: 'D√≥lar estadounidense (USD)' },
      { value: 'eur', label: 'Euro (EUR)' },
      { value: 'gbp', label: 'Libra esterlina (GBP)' },
      { value: 'jpy', label: 'Yen japon√©s (JPY)' },
    ],
    size: 'md',
  },
  render: (args) => ({
    components: { VxvSelect },
    setup() {
      return { args };
    },
    template: '<vxv-select v-bind="args" />',
  }),
};

/**
 * Select deshabilitado
 */
export const Disabled: Story = {
  args: {
    modelValue: 'es',
    label: 'Pa√≠s',
    disabled: true,
    options: [
      { value: 'es', label: 'Espa√±a' },
      { value: 'mx', label: 'M√©xico' },
      { value: 'ar', label: 'Argentina' },
    ],
    size: 'md',
  },
  render: (args) => ({
    components: { VxvSelect },
    setup() {
      return { args };
    },
    template: '<vxv-select v-bind="args" />',
  }),
};

/**
 * Select con selecci√≥n m√∫ltiple
 */
export const Multiple: Story = {
  args: {
    modelValue: [],
    label: 'Idiomas',
    placeholder: 'Selecciona idiomas',
    multiple: true,
    options: [
      { value: 'es', label: 'Espa√±ol' },
      { value: 'en', label: 'Ingl√©s' },
      { value: 'fr', label: 'Franc√©s' },
      { value: 'de', label: 'Alem√°n' },
      { value: 'it', label: 'Italiano' },
    ],
    size: 'md',
  },
  render: (args) => ({
    components: { VxvSelect },
    setup() {
      return { args };
    },
    template: '<vxv-select v-bind="args" />',
  }),
};

/**
 * Diferentes tama√±os de select
 */
export const Sizes: Story = {
  render: () => ({
    components: { VxvSelect },
    template: `
      <div class="flex flex-col gap-4">
        <vxv-select 
          label="Select peque√±o" 
          placeholder="Tama√±o peque√±o" 
          size="sm"
          :options="['Opci√≥n 1', 'Opci√≥n 2', 'Opci√≥n 3']" 
        />
        <vxv-select 
          label="Select mediano" 
          placeholder="Tama√±o mediano" 
          size="md"
          :options="['Opci√≥n 1', 'Opci√≥n 2', 'Opci√≥n 3']" 
        />
        <vxv-select 
          label="Select grande" 
          placeholder="Tama√±o grande" 
          size="lg"
          :options="['Opci√≥n 1', 'Opci√≥n 2', 'Opci√≥n 3']" 
        />
      </div>
    `,
  }),
};

/**
 * Select con opciones personalizadas
 */
export const CustomOptions: Story = {
  args: {
    modelValue: '',
    label: 'Selecciona un usuario',
    placeholder: 'Selecciona un usuario',
    size: 'md',
  },
  render: (args) => ({
    components: { VxvSelect },
    setup() {
      return { args };
    },
    template: `
      <vxv-select v-bind="args">
        <option value="" disabled>{{ args.placeholder }}</option>
        <option value="1">üë®‚Äçüíº Juan P√©rez (Admin)</option>
        <option value="2">üë©‚Äçüíº Mar√≠a Garc√≠a (Editor)</option>
        <option value="3">üë®‚Äçüíª Carlos L√≥pez (Desarrollador)</option>
        <option value="4">üë©‚Äçüîß Ana Mart√≠nez (T√©cnico)</option>
      </vxv-select>
    `,
  }),
};
